!function(s,r){var o=s(document),l=r.i18n.__,d=r.i18n._x,m=r.i18n.sprintf;(r=r||{}).updates=r.updates||{},r.updates.importDemo=function(e){var a=s('.demo-import[data-slug="'+e.slug+'"]');return o.find("body").hasClass("full-overlay-active")&&(a=s(".wp-full-overlay-header, .wp-full-overlay-footer").find(".demo-import")),e=_.extend({success:r.updates.importDemoSuccess,error:r.updates.importDemoError},e),a.addClass("updating-message"),a.parents(".theme").addClass("focus"),a.html()!==l("Importing...","quick-demo-import")&&a.data("originaltext",a.html()),a.text(l("Importing...","quick-demo-import")).attr("aria-label",m(d("Importing %s...","demo","quick-demo-import"),a.data("name"))),r.a11y.speak(l("Importing... please wait.","quick-demo-import"),"polite"),s('.install-theme-info, [data-slug="'+e.slug+'"]').removeClass("demo-import-failed").find(".notice.notice-error").remove(),o.trigger("wp-demo-importing",e),r.updates.ajax("import-demo",e)},r.updates.importDemoSuccess=function(e){var a,t=s(".wp-full-overlay-header, .wp-full-overlay-footer, [data-slug="+e.slug+"]");o.trigger("wp-demo-import-success",e),a=t.find(".button-primary").removeClass("updating-message").addClass("updated-message disabled").attr("aria-label",m(d("%s imported!","demo","quick-demo-import"),e.demoName)).text(l("Imported!","quick-demo-import")),r.a11y.speak(l("Import completed successfully.","quick-demo-import"),"polite"),setTimeout(function(){e.previewUrl&&(a.siblings(".demo-preview").remove(),a.attr("target","_blank").attr("href",e.previewUrl).removeClass("demo-import updated-message disabled").addClass("live-preview").attr("aria-label",m(d("Live Preview %s","demo","quick-demo-import"),e.demoName)).text(l("Live Preview","quick-demo-import")))},1e3)},r.updates.importDemoError=function(e){var a,t=m(l("Import failed: %s","quick-demo-import"),e.errorMessage),i=r.updates.adminNotice({className:"update-message notice-error notice-alt",message:t});r.updates.isValidResponse(e,"import")&&(r.updates.maybeHandleCredentialError(e,"import-demo")||(o.find("body").hasClass("full-overlay-active")?(a=s('.demo-import[data-slug="'+e.slug+'"]'),s(".install-theme-info").prepend(i)):a=s('[data-slug="'+e.slug+'"]').removeClass("focus").addClass("demo-import-failed").append(i).find(".demo-import"),a.removeClass("updating-message").attr("aria-label",m(d("%s import failed","demo","quick-demo-import"),a.data("name"))).text(l("Import Failed!","quick-demo-import")),r.a11y.speak(t,"assertive"),o.trigger("wp-demo-import-error",e)))},r.updates.bulkInstallPlugin=function(e){var a,t,i;return e=_.extend({success:r.updates.bulkInstallPluginSuccess,error:r.updates.bulkInstallPluginError},e),o.find("body").hasClass("full-overlay-active")?(a=s('tr[data-slug="'+e.slug+'"]'),t=s('.theme-install-overlay .demo-import[data-slug="'+e.demo+'"]'),i=m(d("Installing %s...","plugin","quick-demo-import"),a.data("name")),a.find(".plugin-status span").addClass("updating-message").attr("aria-label",m(d("Installing %s...","plugin","quick-demo-import"),a.data("name"))).text(l("Installing...","quick-demo-import"))):(t=s('.demo-import[data-slug="'+e.demo+'"]'),i=m(d("Installing %s...","plugin","quick-demo-import"),e.name),t.parents(".theme").addClass("focus")),t.html()!==l("Installing...","quick-demo-import")&&t.data("originaltext",t.html()),t.attr("aria-label",i).addClass("updating-message").text(l("Installing...","quick-demo-import")),r.a11y.speak(l("Installing... please wait.","quick-demo-import"),"polite"),o.trigger("wp-plugin-bulk-installing",e),r.updates.ajax("install-required-plugins",e)},r.updates.bulkInstallPluginSuccess=function(e){s('tr[data-slug="'+e.slug+'"]').removeClass("install").addClass("installed").find(".plugin-status span").removeClass("updating-message install-now").addClass("updated-message active").attr("aria-label",m(d("%s installed!","plugin","quick-demo-import"),e.pluginName)).text(d("Installed!","plugin","quick-demo-import")),r.a11y.speak(l("Installation completed successfully.","quick-demo-import"),"polite"),o.trigger("wp-plugin-bulk-install-success",e)},r.updates.bulkInstallPluginError=function(e){var a,t=s('tr[data-slug="'+e.slug+'"]'),i=t.find(".plugin-status span");r.updates.isValidResponse(e,"install")&&(r.updates.maybeHandleCredentialError(e,"install-plugin")||(a=m(l("Installation failed: %s","quick-demo-import"),e.errorMessage),i.removeClass("updating-message").addClass("updated-message").attr("aria-label",m(d("%s installation failed","plugin","quick-demo-import"),t.data("name"))).text(l("Installation Failed!","quick-demo-import")),r.a11y.speak(a,"assertive"),o.trigger("wp-plugin-bulk-install-error",e)))},r.updates.isValidResponse=function(e,a){var t,i=l("Something went wrong.","quick-demo-import");if(_.isObject(e)&&!_.isFunction(e.always))return!0;switch(_.isString(e)&&"-1"===e?i=l("An error has occurred. Please reload the page and try again.","quick-demo-import"):_.isString(e)?i=e:void 0!==e.readyState&&0===e.readyState?i=l("Connection lost or the server is busy. Please try again later.","quick-demo-import"):_.isString(e.statusText)&&(i=e.statusText+' <a href="https://quickdemoimport.com/#demo-import-process-failed" target="_blank">'+l("Try this solution!","quick-demo-import")+"</a>"),a){case"import":t=l("Import failed: %s","quick-demo-import");break;case"install":t=l("Installation failed: %s","quick-demo-import")}return t=t.replace("%s",i),r.updates.addAdminNotice({id:"unknown_error",className:"notice-error is-dismissible",message:_.unescape(t)}),r.updates.ajaxLocked=!1,r.updates.queue=[],s(".button.updating-message").removeClass("updating-message").removeAttr("aria-label").text(l("Import Failed!","quick-demo-import")),r.a11y.speak(t,"assertive"),!1},r.updates.queueChecker=function(){var e;if(!r.updates.ajaxLocked&&r.updates.queue.length){switch((e=r.updates.queue.shift()).action){case"import-demo":r.updates.importDemo(e.data);break;case"install-plugin":r.updates.bulkInstallPlugin(e.data)}o.trigger("wp-updates-queue-job",e)}}}(jQuery,window.wp);